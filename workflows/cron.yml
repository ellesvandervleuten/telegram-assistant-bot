name: Call Vercel Webhook
on:
  schedule:
    # 07:55 NL (05:55 UTC)
    - cron: '55 5 * * *'
    # 08:30 NL ma-vr (06:30 UTC)
    - cron: '30 6 * * 1-5'
    # 12:45 NL (10:45 UTC)
    - cron: '45 10 * * *'
    # 15:30 NL (13:30 UTC)
    - cron: '30 13 * * *'
    # 22:00 NL (20:00 UTC)
    - cron: '0 12 * * *'
    # Uurlijkse check-ins op :30 NL (dus ook :30 UTC)
    - cron: '30 7,8,9,10,11,12,14,16,18,19 * * *'
  workflow_dispatch:

jobs:
  call-webhook:
    runs-on: ubuntu-latest
    steps:
      - name: Call Vercel API
        run: |
          curl -X POST https://telegram-assistant-bot-weld.vercel.app/api/webhook \
            -H "Content-Type: application/json" \
            -d '{"source": "github-actions"}'
      - name: Log result
        run: echo "Webhook called successfully at $(date -u) UTC"
